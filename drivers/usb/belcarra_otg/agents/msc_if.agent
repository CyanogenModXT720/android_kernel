#!/bin/sh
 #####################################################################
 #
 # Filename:      msc_if.agent
 # Description:   
 #      MSC Hotplug policy for Linux 2.6 Kernel.
 #
 #      Kernel NET hotplug params include:
 #
 #                   ACTION=%s [register or unregister]
 #                   INTERFACE=%s
 #
 #      The msc_if.agent script is called by the msc_if function
 #      when the USB Device is attached or detacched from a USB Host.
 #
 # Copyright:
 #
 #      Advanced Technology and Software Operations
 #      Copyright (c) Motorola 2006-2007
 #
 # History:
 #      
 #      Author          Date Number     Description of Changes
 #      ------------    -------------   --------------------------
 #      Motorola        17 March 2006   Created file with attach/detach
 #                                      capabilities.
 #      Motorola        04 Oct   2007   Changes for OSS compliance
 #
 ######################################################################

cd /etc/hotplug
. ./hotplug.functions


case $ACTION in

attach)
        echo "MSC Hotplug Attached!"
        if [ -e /usr/local/bin/mscapp ] ; then
	    /usr/local/bin/mscapp&
	else
	    echo "MSC Hotplug Error: Attached, but didn't find mscapp!"
	fi
	exit 0
	;;


detach)
        echo "MSC Hotplug Attached!"
        if [ -e /usr/local/bin/mscapp ] ; then
	    kill `ps -ef | grep mscapp | busybox awk '{print $1}'` 
	fi
	exit 0
	;;

*)
        echo "MSC Hotplug Error: no action given!"
	exit 0
	;;

esac
exit 0
